---
title: 'Resend Confirmation Email'
description: 'Request a new email verification token with JWT or traditional authentication'
api: 'POST https://api.authiqa.com/auth/request-new-confirmation'
---

## Overview

This endpoint allows users to request a new verification email if their previous token has expired or was lost. Supports both JWT authentication (for logged-in users) and traditional request body authentication. The API includes rate limiting and validation to prevent abuse.

## API Details

### Authentication Methods

#### Method 1: JWT Authentication (Recommended)
<ParamField header="Authorization" type="string">
  Bearer JWT token for authenticated users
</ParamField>

<ParamField body="verifyAuthPath" type="string">
  Optional custom verification path for email verification
</ParamField>

#### Method 2: Traditional Authentication
<ParamField body="email" type="string" required>
  Email address to resend verification to
</ParamField>

<ParamField body="parentPublicKey" type="string">
  Required for child accounts when using traditional authentication
</ParamField>

<ParamField body="verifyAuthPath" type="string">
  Optional custom verification path for email verification
</ParamField>

<RequestExample>
```bash cURL - JWT Authentication
curl -X POST https://api.authiqa.com/auth/request-new-confirmation \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "verifyAuthPath": "/custom-verify"
  }'
```

```bash cURL - Traditional Authentication
curl -X POST https://api.authiqa.com/auth/request-new-confirmation \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com"
  }'
```

```javascript JavaScript - JWT Authentication
const response = await fetch('https://api.authiqa.com/auth/request-new-confirmation', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_JWT_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    verifyAuthPath: '/custom-verify'
  })
});
```

```javascript JavaScript - Traditional Authentication
const response = await fetch('https://api.authiqa.com/auth/request-new-confirmation', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    email: 'user@example.com'
  })
});
```

```python Python
import requests

# JWT Authentication
response = requests.post(
    'https://api.authiqa.com/auth/request-new-confirmation',
    headers={'Authorization': 'Bearer YOUR_JWT_TOKEN'},
    json={'verifyAuthPath': '/custom-verify'}
)

# Traditional Authentication
response = requests.post(
    'https://api.authiqa.com/auth/request-new-confirmation',
    json={'email': 'user@example.com'}
)
```
</RequestExample>

## Try It Out

<Note>
Test the API using either JWT or traditional authentication:
</Note>

<Card>
  <Tabs>
    <Tab title="JWT Authentication">
      <ParamField header="Authorization" placeholder="Bearer YOUR_JWT_TOKEN">
        JWT token for authenticated users
      </ParamField>

      <ParamField path="verifyAuthPath" placeholder="/custom-verify">
        Custom verification path (optional)
      </ParamField>
    </Tab>

    <Tab title="Traditional Authentication">
      <ParamField path="email" placeholder="user@example.com" required>
        Email address to receive verification link
      </ParamField>

      <ParamField path="parentPublicKey" placeholder="APK_1234567890abcdef_1234">
        Parent public key (required for child accounts)
      </ParamField>

      <ParamField path="verifyAuthPath" placeholder="/custom-verify">
        Custom verification path (optional)
      </ParamField>
    </Tab>
  </Tabs>

  <Expandable title="Headers" defaultOpen>
    <ParamField header="Content-Type" value="application/json" />
  </Expandable>

  <Button
    onClick={() => {
      alert('Sending request...');
    }}
  >
    Send Request
  </Button>
</Card>

## Process Flow

<Steps>
  <Step title="Authentication Detection">
    - Check for JWT token in Authorization header
    - If JWT present, verify and extract user information
    - If no JWT, use traditional request body authentication
  </Step>

  <Step title="User Resolution">
    - JWT flow: Get user by decoded token information
    - Traditional flow: Get user by email and optional parent public key
    - Validate user exists and account requirements
  </Step>

  <Step title="Validation Checks">
    - Verify email is not already verified
    - Check account type specific requirements
    - Validate rate limiting (1-minute cooldown)
    - Check parent account status (for child accounts)
  </Step>

  <Step title="Token Generation & Email">
    - Generate new 12-character verification token
    - Update verification token in database
    - Send verification email with appropriate branding
    - Support custom verification paths
  </Step>
</Steps>

## Authentication Flows

### JWT Authentication Flow
1. User provides JWT token in Authorization header
2. System verifies token and extracts user information
3. User information used to send verification email
4. Optional custom verification path supported

### Traditional Authentication Flow
1. User provides email in request body
2. For child accounts, parent public key required
3. System validates user and parent relationship
4. Verification email sent with organization branding


## Response Examples

<ResponseField name="200: Success">
```json
{
  "success": true,
  "data": {
    "message": "A new verification link has been sent to your email"
  }
}
```
</ResponseField>

<ResponseField name="400: Invalid Request">
```json
{
  "success": false,
  "error": {
    "code": "INVALID_EMAIL_FORMAT",
    "message": "Invalid email format"
  }
}
```
</ResponseField>

<ResponseField name="429: Rate Limited">
```json
{
  "success": false,
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Please wait 45 seconds before requesting a new verification link"
  },
  "headers": {
    "X-RateLimit-Limit": "1",
    "X-RateLimit-Remaining": "0",
    "X-RateLimit-Reset": "1729616234"
  }
}
```
</ResponseField>

## Error Codes

<ResponseField name="400 Bad Request">
- `MISSING_REQUEST_BODY` - Request body required (traditional auth)
- `INVALID_REQUEST_BODY` - Invalid JSON format
- `MISSING_REQUIRED_FIELDS` - Email field required (traditional auth)
- `INVALID_EMAIL_FORMAT` - Invalid email format
- `EMAIL_ALREADY_VERIFIED` - Email already verified
- `MISSING_PARENT_PUBLIC_KEY` - Parent public key required for child accounts
- `INVALID_PARENT_PUBLIC_KEY_FORMAT` - Invalid public key format
- `INVALID_REQUEST` - Parent public key should not be provided for parent accounts
</ResponseField>

<ResponseField name="401 Unauthorized">
- `INVALID_PARENT_PUBLIC_KEY` - Invalid parent public key
</ResponseField>

<ResponseField name="403 Forbidden">
- `PARENT_ACCOUNT_INACTIVE` - Parent account has insufficient balance
</ResponseField>

<ResponseField name="404 Not Found">
- `USER_NOT_FOUND` - No account with provided information
</ResponseField>

<ResponseField name="429 Too Many Requests">
- `RATE_LIMIT_EXCEEDED` - Wait before requesting again
</ResponseField>

<ResponseField name="500 Internal Server Error">
- `INTERNAL_ERROR` - Unexpected server error occurred
</ResponseField>

## Rate Limiting

<Card title="Rate Limits" icon="shield">
  - 1 request per minute per email
  - Rate limit headers included in response:
    ```bash
    X-RateLimit-Limit: 1
    X-RateLimit-Remaining: 0
    X-RateLimit-Reset: <timestamp>
    ```
  - Cooldown period: 60 seconds
</Card>

<Note>
Email verification links expire after 15 minutes. Users should request a new link if the original expires.
</Note>