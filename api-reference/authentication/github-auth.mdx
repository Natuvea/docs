---
title: 'GitHub Authentication'
description: 'Authenticate users with GitHub OAuth for child accounts'
api: 'POST https://api.authiqa.com/auth/github'
---

## Overview

This endpoint allows child users to authenticate using their GitHub account. The system supports both new user creation and linking existing accounts with GitHub authentication. Parent organizations can configure their own GitHub OAuth credentials for custom branding.

## API Details

### Request Format

<ParamField body="code" type="string" required>
  GitHub authorization code received from GitHub OAuth flow
</ParamField>

<ParamField body="parentPublicKey" type="string" required>
  Parent organization's public key for child account creation
</ParamField>

<RequestExample>
```json GitHub Authentication
{
  "code": "github_auth_code_123456",
  "parentPublicKey": "APK_1234567890abcdef_1234567890"
}
```
</RequestExample>

## Try It Out

<Note>
Test the API by providing your GitHub authorization code and parent public key:
</Note>

<Card>
  <ParamField path="code" placeholder="github_auth_code_123456" required>
    GitHub authorization code from OAuth flow
  </ParamField>

  <ParamField path="parentPublicKey" placeholder="APK_1234567890abcdef_1234" required>
    Parent organization's public key
  </ParamField>

  <Expandable title="Headers" defaultOpen>
    <ParamField header="Content-Type" value="application/json" />
  </Expandable>

  <Button
    onClick={() => {
      alert('Sending request...');
    }}
  >
    Send Request
  </Button>
</Card>

## Code Examples

<CodeGroup>
```bash cURL
curl -X POST https://api.authiqa.com/auth/github \
  -H "Content-Type: application/json" \
  -d '{
    "code": "github_auth_code_123456",
    "parentPublicKey": "APK_1234567890abcdef_1234567890"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.authiqa.com/auth/github', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    code: 'github_auth_code_123456',
    parentPublicKey: 'APK_1234567890abcdef_1234567890'
  })
});
```

```python Python
import requests

response = requests.post(
    'https://api.authiqa.com/auth/github',
    json={
        'code': 'github_auth_code_123456',
        'parentPublicKey': 'APK_1234567890abcdef_1234567890'
    }
)
```

```php PHP
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.authiqa.com/auth/github');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    'code' => 'github_auth_code_123456',
    'parentPublicKey' => 'APK_1234567890abcdef_1234567890'
]));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
```
</CodeGroup>

## Authentication Flow

<Steps>
  <Step title="GitHub OAuth">
    - User initiates GitHub sign-in on frontend
    - User authorizes the application on GitHub
    - GitHub returns authorization code
    - Frontend sends authorization code to this endpoint
  </Step>

  <Step title="Token Exchange">
    - Exchange authorization code for access token
    - Verify access token with GitHub
    - Extract user information (GitHub ID, email, username)
  </Step>

  <Step title="Parent Validation">
    - Validate parent public key format and existence
    - Check if parent has GitHub SSO configured
    - Use parent's GitHub OAuth credentials if available
  </Step>

  <Step title="User Resolution">
    - Check if user exists by GitHub ID
    - If not found, check if email exists for account linking
    - Create new user if no existing account found
  </Step>

  <Step title="Token Generation">
    - Generate JWT token for authenticated user
    - Update user's last login information
    - Return authentication response
  </Step>
</Steps>

## Response Examples

<ResponseField name="200: Success - New User">
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "userID": "USR_github_12345",
    "email": "user@github.com",
    "username": "github_user",
    "publicKey": "APK_abc123def456_1234567890"
  }
}
```
</ResponseField>

<ResponseField name="200: Success - Existing User">
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "userID": "USR_existing_67890",
    "email": "user@github.com",
    "username": "existinguser",
    "publicKey": "APK_def456ghi789_0987654321"
  }
}
```
</ResponseField>

<ResponseField name="400: Invalid Code">
```json
{
  "message": "Invalid GitHub authorization code."
}
```
</ResponseField>

<ResponseField name="400: No Verified Email">
```json
{
  "message": "GitHub account must have a verified primary email address."
}
```
</ResponseField>

## GitHub Developer Setup Guide

### Creating a GitHub OAuth Application

<Steps>
  <Step title="Access GitHub Developer Settings">
    - Go to your GitHub account settings
    - Navigate to **Settings > Developer settings > OAuth Apps**
    - Click **New OAuth App** to create a new application
  </Step>

  <Step title="Configure Application Details">
    - **Application name**: Enter your application name (e.g., "YourApp Auth")
    - **Homepage URL**: Enter your application's homepage URL
      - For development: `http://localhost:3000`
      - For production: `https://yourdomain.com`
    - **Application description**: Optional description for your OAuth app
  </Step>

  <Step title="Configure Authorization Callback URL">
    <Warning>
      **Important**: You must only enter your sign-in page URL in the redirect URL field. Do not include the callback path.
    </Warning>
    
    - **Authorization callback URL**: Enter your sign-in page URL only:
      - For development: `http://localhost:3000/signin`
      - For production: `https://yourdomain.com/signin`
    - This is different from the actual OAuth callback endpoint - GitHub will redirect back to your sign-in page
  </Step>

  <Step title="Get Your Credentials">
    - Click **Register application** to create the app
    - After creation, you'll see your **Client ID**
    - Click **Generate a new client secret** to get your **Client Secret**
    - Save both credentials securely
  </Step>

  <Step title="Configure Organization Settings">
    - In your parent organization dashboard, navigate to **Settings > Authentication**
    - Enter your **GitHub Client ID** and **GitHub Client Secret**
    - Save the configuration to enable GitHub SSO for child accounts
  </Step>
</Steps>

### Required Scopes

The following scopes are required for GitHub authentication:
- `user:email` - Access to user's email addresses (public and private)
- `read:user` - Access to user's profile information
- `repo` - Access to user's repositories (if needed for additional features)

### GitHub OAuth Flow Notes

<Note>
Unlike other OAuth providers, GitHub's OAuth flow works differently:
- The **Authorization callback URL** should point to your sign-in page, not the actual callback endpoint
- Your frontend application will handle the OAuth callback and extract the authorization code
- The authorization code is then sent to this API endpoint for verification and token exchange
</Note>

### Testing Your Setup

<Note>
Before going live, test your GitHub OAuth integration:
1. Use GitHub's [OAuth App settings](https://github.com/settings/developers) to verify your app configuration
2. Test the complete flow in your development environment
3. Ensure the authorization code is properly extracted from the callback URL
4. Verify email verification status is returned from GitHub
</Note>

## Error Codes

<ResponseField name="400 Bad Request">
- `Invalid input` - Request body validation failed
- `Missing or invalid parentPublicKey` - Parent public key required
- `Invalid parentPublicKey format` - Public key format validation failed
- `Invalid parent public key` - Parent account not found
- `Invalid GitHub authorization code` - GitHub code verification failed
- `GitHub account must have a verified primary email address` - GitHub email verification required
</ResponseField>

<ResponseField name="500 Internal Server Error">
- `Failed to create or update user` - Database operation failed
- `Failed to generate authentication token` - JWT generation failed
- `Failed to exchange code for GitHub token` - GitHub API communication failed
- `Failed to fetch user info from GitHub` - GitHub API user data retrieval failed
- `Internal Server Error` - Unexpected server error
</ResponseField>

## GitHub OAuth Configuration

### Parent Organization Setup
Parent organizations can configure their own GitHub OAuth credentials:

<CardGroup cols={2}>
  <Card title="Custom OAuth" icon="github">
    - Configure via Update Organization API
    - Use organization's GitHub OAuth app
    - Custom branding and domain restrictions
    - Enhanced security and control
  </Card>
  <Card title="Default OAuth" icon="shield-check">
    - Uses Authiqa's default GitHub OAuth
    - Fallback when organization hasn't configured
    - Standard GitHub authentication flow
    - Basic functionality available
  </Card>
</CardGroup>

### Required GitHub OAuth Scopes
- `user:email` - Access to user's email addresses
- `read:user` - Access to basic user information

## Security Features

<Card title="Security Validations" icon="shield-alt">
- **Token Verification**: GitHub access tokens verified with GitHub's servers
- **Email Verification**: Only verified primary emails accepted
- **Parent Validation**: Parent public key format and existence validated
- **Account Linking**: Secure linking of existing accounts with GitHub
- **JWT Generation**: Secure JWT tokens for authenticated sessions
</Card>

## Account Creation

### New Users
- Username automatically generated from GitHub username
- Account type set to "child" under specified parent
- GitHub ID stored for future authentication
- Email marked as verified (verified by GitHub)

### Existing Users
- GitHub ID linked to existing account
- Maintains existing username and settings
- Enables dual authentication (email + GitHub)
- Updates last login information

## Notes

<Note>
This endpoint is specifically designed for child account authentication. Parent accounts should use the standard sign-in endpoint.
</Note>

<Warning>
The GitHub authorization code must be obtained through a proper OAuth flow and should not be reused. Each authentication request should use a fresh code.
</Warning>